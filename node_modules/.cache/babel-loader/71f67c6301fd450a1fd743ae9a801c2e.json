{"ast":null,"code":"var _jsxFileName = \"/Users/vaceslavstruckov/Downloads/project/src/Components/CurrencyTable.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { v4 as uuidv4 } from 'uuid';\nimport TableItems from \"./TableItems\";\nimport Loader from \"./Loader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CurrencyTable() {\n  _s();\n\n  const [loading, setLoading] = useState(true);\n  const [resultData, setResultData] = useState({\n    rub: [],\n    usd: [],\n    eur: []\n  });\n  const [rateArr, setRateArr] = useState({\n    RUB_USD: [],\n    RUB_EUR: [],\n    EUR_USD: []\n  });\n  const [titles] = React.useState([{\n    id: 1,\n    title: 'Pair name/market'\n  }, {\n    id: 2,\n    title: 'First'\n  }, {\n    id: 3,\n    title: 'Second'\n  }, {\n    id: 4,\n    title: 'Third'\n  }]);\n\n  const updateDataHelper = (first, second, third) => {\n    const rubArray = [first.RUB, second.RUB, third.RUB];\n    const eurArray = [first.EUR, second.EUR, third.EUR];\n    const usdArray = [first.USD, second.USD, third.USD];\n    setResultData(prevState => ({ ...prevState,\n      rub: rubArray,\n      eur: eurArray,\n      usd: usdArray\n    }));\n    setRateArr(prevState => ({ ...prevState,\n      CHECK: [{\n        value: first.RUB,\n        id: uuidv4()\n      }],\n      RUB_USD: [{\n        value: first.RUB / first.USD,\n        id: uuidv4()\n      }, {\n        value: second.RUB / second.USD,\n        id: uuidv4()\n      }, {\n        value: third.RUB / third.USD,\n        id: uuidv4()\n      }],\n      RUB_EUR: [{\n        value: first.RUB / first.EUR,\n        id: uuidv4()\n      }, {\n        value: second.RUB / second.EUR,\n        id: uuidv4()\n      }, {\n        value: third.RUB / third.EUR,\n        id: uuidv4()\n      }],\n      EUR_USD: [{\n        value: first.EUR / first.USD,\n        id: uuidv4()\n      }, {\n        value: second.EUR / second.USD,\n        id: uuidv4()\n      }, {\n        value: third.EUR / third.USD,\n        id: uuidv4()\n      }]\n    }));\n  };\n\n  useEffect(() => {\n    subscribe();\n  }, []);\n\n  const subscribe = async () => {\n    try {\n      const responseF = await axios.get('http://localhost:3010/api/v1/first/poll');\n      const responseS = await axios.get('http://localhost:3010/api/v1/second/poll');\n      const responseT = await axios.get('http://localhost:3010/api/v1/third/poll');\n      updateDataHelper(responseF.data.rates, responseS.data.rates, responseT.data.rates);\n      setLoading(false);\n      await subscribe();\n    } catch (e) {\n      setTimeout(() => {\n        subscribe();\n      }, 500);\n    }\n\n    setLoading(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [loading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 19\n    }, this), loading ? null : /*#__PURE__*/_jsxDEV(TableItems, {\n      resultData: resultData,\n      rateArr: rateArr,\n      titles: titles\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 26\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CurrencyTable, \"pK59lpSt0ytyzhZFDdeDBXWrVs4=\");\n\n_c = CurrencyTable;\nexport default CurrencyTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrencyTable\");","map":{"version":3,"sources":["/Users/vaceslavstruckov/Downloads/project/src/Components/CurrencyTable.js"],"names":["React","useEffect","useState","axios","v4","uuidv4","TableItems","Loader","CurrencyTable","loading","setLoading","resultData","setResultData","rub","usd","eur","rateArr","setRateArr","RUB_USD","RUB_EUR","EUR_USD","titles","id","title","updateDataHelper","first","second","third","rubArray","RUB","eurArray","EUR","usdArray","USD","prevState","CHECK","value","subscribe","responseF","get","responseS","responseT","data","rates","e","setTimeout"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport axios from \"axios\";\nimport { v4 as uuidv4 } from 'uuid';\nimport TableItems from \"./TableItems\";\nimport Loader from \"./Loader\";\n\nfunction CurrencyTable() {\n  const [loading, setLoading] = useState(true)\n  const [resultData, setResultData] = useState({\n    rub: [],\n    usd: [],\n    eur: [],\n  });\n  const [rateArr, setRateArr] = useState({\n      RUB_USD: [],\n      RUB_EUR: [],\n      EUR_USD: []\n  });\n  const [titles] = React.useState([\n    {id: 1, title: 'Pair name/market'},\n    {id: 2, title: 'First'},\n    {id: 3, title: 'Second'},\n    {id: 4, title: 'Third'},\n  ]);\n\n  const updateDataHelper = (first, second, third) => {\n    const rubArray = [first.RUB, second.RUB, third.RUB];\n    const eurArray = [first.EUR, second.EUR, third.EUR];\n    const usdArray = [first.USD, second.USD, third.USD];\n\n    setResultData((prevState) => ({\n      ...prevState,\n      rub: rubArray,\n      eur: eurArray,\n      usd: usdArray,\n    }));\n    setRateArr((prevState) => ({\n      ...prevState,\n      CHECK: [{value: first.RUB, id: uuidv4()}],\n      RUB_USD: [{value: first.RUB / first.USD, id: uuidv4()}, {value: second.RUB / second.USD, id: uuidv4()}, {\n        value: third.RUB / third.USD,\n        id: uuidv4()\n      }],\n      RUB_EUR: [{value: first.RUB / first.EUR, id: uuidv4()}, {value: second.RUB / second.EUR, id: uuidv4()}, {value: third.RUB / third.EUR, id: uuidv4()}],\n      EUR_USD: [{value: first.EUR / first.USD, id: uuidv4()}, {value: second.EUR / second.USD, id: uuidv4()}, {\n      value: third.EUR / third.USD,\n      id: uuidv4()\n    }]\n    }))\n  };\n\n  useEffect(() => {\n    subscribe();\n  }, []);\n\n  const subscribe = async () => {\n    try {\n      const responseF = await axios.get('http://localhost:3010/api/v1/first/poll');\n      const responseS = await axios.get('http://localhost:3010/api/v1/second/poll');\n      const responseT = await axios.get('http://localhost:3010/api/v1/third/poll');\n\n\n      updateDataHelper(\n        responseF.data.rates,\n        responseS.data.rates,\n        responseT.data.rates\n      );\n      setLoading(false)\n      await subscribe();\n    } catch (e) {\n      setTimeout(() => {\n        subscribe();\n      }, 500);\n    }\n    setLoading(false)\n  };\n\n  return (\n    <div>\n      {loading && <Loader />}\n\n      { loading ? null : <TableItems\n    resultData={resultData}\n    rateArr={rateArr}\n    titles={titles}\n  /> }\n\n</div>\n  );\n}\n\nexport default CurrencyTable;\n"]},"metadata":{},"sourceType":"module"}