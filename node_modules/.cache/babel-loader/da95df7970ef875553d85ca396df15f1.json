{"ast":null,"code":"var _jsxFileName = \"/Users/vaceslavstruckov/Downloads/project/src/Components/CurrencyTable.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CurrencyTable() {\n  _s();\n\n  const [resultData, setResultData] = useState({\n    rub: [],\n    usd: [],\n    eur: []\n  });\n\n  const updateDataHelper = (first, second, third) => {\n    const rubArray = [first.RUB, second.RUB, third.RUB];\n    const eurArray = [first.EUR, second.EUR, third.EUR];\n    const usdArray = [first.USD, second.USD, third.USD];\n    setResultData(prevState => ({ ...prevState,\n      rub: rubArray,\n      eur: eurArray,\n      usd: usdArray\n    }));\n  };\n\n  console.log(resultData);\n  useEffect(() => {\n    subscribe();\n  }, []);\n\n  const subscribe = async () => {\n    try {\n      const responseF = await axios.get('http://localhost:3010/api/v1/first/poll');\n      const responseS = await axios.get('http://localhost:3010/api/v1/second/poll');\n      const responseT = await axios.get('http://localhost:3010/api/v1/third/poll');\n      updateDataHelper(responseF.value.rates.RUB, responseS.value.rates, responseT.value.rates);\n      await subscribe();\n    } catch (e) {\n      setTimeout(() => {\n        subscribe();\n      }, 500);\n    }\n  }; // const generateFakeResponse = () => {\n  //   console.log(\"generateFakeResponse\");\n  //   return new Promise((resolve) => {\n  //     const response = {\n  //       value: {\n  //         rates: {\n  //           EUR: Math.random(),\n  //           RUB: Math.random(),\n  //           USD: Math.random(),\n  //         },\n  //       },\n  //     };\n  //     setTimeout(() => {\n  //       resolve(response);\n  //     }, 1000);\n  //   });\n  // };\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"RUB\", resultData.rub.map(value => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: value\n    }, value, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)), \"USD\", resultData.usd.map(value => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: value\n    }, value, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)), \"EUR\", resultData.eur.map(value => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: value\n    }, value, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CurrencyTable, \"fT5VXBRrnL6LPU5EFBSVtnGFWGU=\");\n\n_c = CurrencyTable;\nexport default CurrencyTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrencyTable\");","map":{"version":3,"sources":["/Users/vaceslavstruckov/Downloads/project/src/Components/CurrencyTable.js"],"names":["React","useEffect","useState","axios","CurrencyTable","resultData","setResultData","rub","usd","eur","updateDataHelper","first","second","third","rubArray","RUB","eurArray","EUR","usdArray","USD","prevState","console","log","subscribe","responseF","get","responseS","responseT","value","rates","e","setTimeout","map"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,SAASC,aAAT,GAAyB;AAAA;;AACvB,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BJ,QAAQ,CAAC;AAC3CK,IAAAA,GAAG,EAAE,EADsC;AAE3CC,IAAAA,GAAG,EAAE,EAFsC;AAG3CC,IAAAA,GAAG,EAAE;AAHsC,GAAD,CAA5C;;AAMA,QAAMC,gBAAgB,GAAG,CAACC,KAAD,EAAQC,MAAR,EAAgBC,KAAhB,KAA0B;AACjD,UAAMC,QAAQ,GAAG,CAACH,KAAK,CAACI,GAAP,EAAYH,MAAM,CAACG,GAAnB,EAAwBF,KAAK,CAACE,GAA9B,CAAjB;AACA,UAAMC,QAAQ,GAAG,CAACL,KAAK,CAACM,GAAP,EAAYL,MAAM,CAACK,GAAnB,EAAwBJ,KAAK,CAACI,GAA9B,CAAjB;AACA,UAAMC,QAAQ,GAAG,CAACP,KAAK,CAACQ,GAAP,EAAYP,MAAM,CAACO,GAAnB,EAAwBN,KAAK,CAACM,GAA9B,CAAjB;AAEAb,IAAAA,aAAa,CAAEc,SAAD,KAAgB,EAC5B,GAAGA,SADyB;AAE5Bb,MAAAA,GAAG,EAAEO,QAFuB;AAG5BL,MAAAA,GAAG,EAAEO,QAHuB;AAI5BR,MAAAA,GAAG,EAAEU;AAJuB,KAAhB,CAAD,CAAb;AAMD,GAXD;;AAaAG,EAAAA,OAAO,CAACC,GAAR,CAAYjB,UAAZ;AACAJ,EAAAA,SAAS,CAAC,MAAM;AACdsB,IAAAA,SAAS;AACV,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMA,SAAS,GAAG,YAAY;AAC5B,QAAI;AACF,YAAMC,SAAS,GAAG,MAAMrB,KAAK,CAACsB,GAAN,CAAU,yCAAV,CAAxB;AACA,YAAMC,SAAS,GAAG,MAAMvB,KAAK,CAACsB,GAAN,CAAU,0CAAV,CAAxB;AACA,YAAME,SAAS,GAAG,MAAMxB,KAAK,CAACsB,GAAN,CAAU,yCAAV,CAAxB;AAGAf,MAAAA,gBAAgB,CACdc,SAAS,CAACI,KAAV,CAAgBC,KAAhB,CAAsBd,GADR,EAEdW,SAAS,CAACE,KAAV,CAAgBC,KAFF,EAGdF,SAAS,CAACC,KAAV,CAAgBC,KAHF,CAAhB;AAMA,YAAMN,SAAS,EAAf;AACD,KAbD,CAaE,OAAOO,CAAP,EAAU;AACVC,MAAAA,UAAU,CAAC,MAAM;AACfR,QAAAA,SAAS;AACV,OAFS,EAEP,GAFO,CAAV;AAGD;AACF,GAnBD,CAzBuB,CA8CvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,sBACE;AAAA,sBAEGlB,UAAU,CAACE,GAAX,CAAeyB,GAAf,CAAoBJ,KAAD,iBAClB;AAAA,gBAAkBA;AAAlB,OAAUA,KAAV;AAAA;AAAA;AAAA;AAAA,YADD,CAFH,SAMGvB,UAAU,CAACG,GAAX,CAAewB,GAAf,CAAoBJ,KAAD,iBAClB;AAAA,gBAAkBA;AAAlB,OAAUA,KAAV;AAAA;AAAA;AAAA;AAAA,YADD,CANH,SAUGvB,UAAU,CAACI,GAAX,CAAeuB,GAAf,CAAoBJ,KAAD,iBAClB;AAAA,gBAAkBA;AAAlB,OAAUA,KAAV;AAAA;AAAA;AAAA;AAAA,YADD,CAVH;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAgBD;;GAhFQxB,a;;KAAAA,a;AAkFT,eAAeA,aAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nfunction CurrencyTable() {\n  const [resultData, setResultData] = useState({\n    rub: [],\n    usd: [],\n    eur: [],\n  });\n\n  const updateDataHelper = (first, second, third) => {\n    const rubArray = [first.RUB, second.RUB, third.RUB];\n    const eurArray = [first.EUR, second.EUR, third.EUR];\n    const usdArray = [first.USD, second.USD, third.USD];\n\n    setResultData((prevState) => ({\n      ...prevState,\n      rub: rubArray,\n      eur: eurArray,\n      usd: usdArray,\n    }));\n  };\n\n  console.log(resultData)\n  useEffect(() => {\n    subscribe();\n  }, []);\n\n  const subscribe = async () => {\n    try {\n      const responseF = await axios.get('http://localhost:3010/api/v1/first/poll');\n      const responseS = await axios.get('http://localhost:3010/api/v1/second/poll');\n      const responseT = await axios.get('http://localhost:3010/api/v1/third/poll');\n\n\n      updateDataHelper(\n        responseF.value.rates.RUB,\n        responseS.value.rates,\n        responseT.value.rates\n      );\n\n      await subscribe();\n    } catch (e) {\n      setTimeout(() => {\n        subscribe();\n      }, 500);\n    }\n  };\n\n  // const generateFakeResponse = () => {\n  //   console.log(\"generateFakeResponse\");\n  //   return new Promise((resolve) => {\n  //     const response = {\n  //       value: {\n  //         rates: {\n  //           EUR: Math.random(),\n  //           RUB: Math.random(),\n  //           USD: Math.random(),\n  //         },\n  //       },\n  //     };\n  //     setTimeout(() => {\n  //       resolve(response);\n  //     }, 1000);\n  //   });\n  // };\n\n  return (\n    <div>\n      RUB\n      {resultData.rub.map((value) => (\n        <div key={value}>{value}</div>\n      ))}\n      USD\n      {resultData.usd.map((value) => (\n        <div key={value}>{value}</div>\n      ))}\n      EUR\n      {resultData.eur.map((value) => (\n        <div key={value}>{value}</div>\n      ))}\n    </div>\n  );\n}\n\nexport default CurrencyTable;\n"]},"metadata":{},"sourceType":"module"}